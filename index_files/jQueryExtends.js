jQuery.fn.extend({limiter:function(limit,elem){$(this).bind("keypress click focus keyup keydown mousedown mouseup mousemove",function(){if(typeof $(this)!='undefined'&&$(this)!=''){setCount(this,elem);setCount($(this)[0],elem);}});function setCount(src,elem){var chars=src.value.length;if(chars>limit){src.value=src.value.substr(0,limit);chars=limit;}
elem.html(limit-chars);}},landingConfirmation:function(text,ok_function,cancel_function){var html='<div id="confirmationWindow" class="popup_find_price popup" style="display: block"><div class="popup_shadow" id="confirmationOverlay" style="display:block"></div>';html+='<table cellspacing="0" cellpadding="0"><tbody><tr><td>'
+'<div class="popup_b"><a class="close_popup" href="#"></a><div class="sb_head">Ошибка</div> <p>'+text+'</p><a class="btn ok" href="#" style="display: inline-block;width:150px;margin:20px 10px 25px 85px">OK</a><a class="btn cancel" style="display: inline-block;width:150px" href="#">Отмена</a></div></div>'
+'</td></tr></tbody></table>'
html+'</div>';$(document.body).append(html);$("#confirmationWindow .ok").click(ok_function);$("#confirmationWindow .cancel").click(cancel_function);$("#confirmationWindow .cancel, #confirmationWindow .ok").click(function(){$("#confirmationOverlay").remove();$("#confirmationWindow").remove();});},confirmation:function(text,ok_function,cancel_function){var html='<div id="confirmationWindow" class="pops2 wpop2 overlayDialog" style="position: fixed; border: solid 1px gray;  top: 30%; left: 30%; width:550px;"><div class="popc" id="dialogContent"><div id="confirm_window" style="display: block;">'
+'<p style="font-size: 20px; margin: 22px 10px 10px 0px; text-align: center;">'+text+'</p>'
+'<p style="text-align: center;"><input type="button" style="margin-right: 20px; display: inline-block;" class="blue_button_100 ok" value="Да"><input type="button" style="display: inline-block;"  class="blue_button_100 cancel" value="Отмена"></p>'
+'</div></div><div class="msk-orange-line"></div></div>';$(document.body).append('<div class="overlay" id="confirmationOverlay" style="display:block"></div>');$(document.body).append(html);$("#confirmationWindow .ok").click(ok_function);$("#confirmationWindow .cancel").click(cancel_function);$("#confirmationWindow .cancel, #confirmationWindow .ok").click(function(){$("#confirmationOverlay").remove();$("#confirmationWindow").remove();});},timeHourSet:function(hour_more,hour_less){var main_self=jQuery(this);main_self.jStepper({minValue:0,maxValue:23,minLength:2});var m_val=0;var timer_more=0;var timer_more_is=false;;var timer_less=0;var timer_less_is=false;var timeout=300;;var hour_p=function(){if(parseInt(main_self.val(),10)){m_val=parseInt(main_self.val(),10);m_val=m_val+1;if(m_val<10){m_val='0'+m_val;}
if(m_val<24){main_self.val(m_val);}else{main_self.val('0'+'0');}}else{main_self.val('0'+'1');}
return false;};var hour_m=function(){if(parseInt(main_self.val(),10)){m_val=parseInt(main_self.val(),10);m_val=m_val-1;if(m_val<10){m_val='0'+m_val;}
main_self.val(m_val);}else{if(main_self.val()==0){main_self.val(23);}else{main_self.val('0'+'0');}}
return false;};hour_more.mousedown(function(){hour_p();if(!timer_more_is){timer_more_is=true;timer_more=window.setInterval(hour_p,timeout);}});hour_less.mousedown(function(){hour_m();if(!timer_less_is){timer_less_is=true;timer_less=window.setInterval(hour_m,timeout);}});hour_less.bind('mouseout mouseup click',function(){timer_less_is=false;clearInterval(timer_less);});hour_more.bind('mouseout mouseup click',function(){timer_more_is=false;clearInterval(timer_more);});},CountryCityChange:function(city_field){var CityChange=function(id){if(id>0){jQuery.post("/ajax/city-load",{country:id},function(response){if(response.cities.length==0){city_field.append('<option value="0">Все города</option>');}else{jQuery(response.cities).each(function(i,item){city_field.append('<option value="'+item.id+'">'+item.city_name+'</option>');});}},"json");}else{city_field.append('<option value="0">Выберите</option>');}};jQuery(this).change(function(){var id=jQuery(this).val();city_field.html("");CityChange(id);});},CountryCityChangeStyler:function(city_field){var CityChange=function(id){if(id>0){jQuery.post("/ajax/city-load",{country:id},function(response){if(response.cities.length==0){city_field.append('<option value="0">Все города</option>');}else{jQuery(response.cities).each(function(i,item){city_field.append('<option value="'+item.id+'">'+item.city_name+'</option>');});}},"json");}else{city_field.append('<option value="0">Выберите</option>');}};jQuery(this).change(function(){var id=jQuery(this).val();city_field.html("");CityChange(id);});},PreloaderReplace:function(options){options=options=options||0;var size=typeof options['size']!='undefined'?options['size']:0;var style=typeof options['style']!='undefined'?options['style']:'';$(this).hide();var preloader='<div style="display: block; width: 50px; height: 50px;" id="preloader"></div>';var preloader_small='<em class="prel-del" ></em>';switch(style){case'':preloader_small='<em class="prel-del" style="position: relative; top: 32px; left: -70px;" ></em>';break;case'0':preloader_small='<em class="prel-del" style="font-size: 12px;" ></em>';break;case'1':break;default:preloader_small='<em class="prel-del" style="font-size: 12px; '+style+'" ></em>';}
switch(size){case 1:$(preloader_small).insertAfter($(this));break;case 2:$(preloader).insertAfter($(this));break;case 3:$(preloader).insertAfter($(this));break;default:$(preloader).insertAfter($(this));}},PreloaderReplaceUndo:function(options){options=options=options||0;var size=typeof options['size']!='undefined'?options['size']:0;$(this).show();switch(size){case 1:$('.prel-del').remove();break;case 2:$('#preloader').remove();break;case 3:$('#preloader').remove();break;default:$('#preloader').remove();}},timeMinuteSet:function(minute_more,minute_less){var main_self=jQuery(this);main_self.jStepper({minValue:0,maxValue:59,minLength:2});var m_val=0;var timer_more=0;var timer_more_is=false;;var timer_less=0;var timer_less_is=false;var timeout=300;var minute_p=function(){if(parseInt(main_self.val(),10)){m_val=parseInt(main_self.val(),10);m_val=m_val+1;if(m_val<10){m_val='0'+m_val;}
if(m_val<60){main_self.val(m_val);}else{main_self.val('0'+'0');}}else{main_self.val('0'+'1');}};var minute_m=function(){if(parseInt(main_self.val(),10)){m_val=parseInt(main_self.val(),10);m_val=m_val-1;if(m_val<10){m_val='0'+m_val;}
main_self.val(m_val);}else{if(main_self.val()==0){main_self.val(59);}else{main_self.val('0'+'0');}}};minute_more.mousedown(function(){minute_p();if(!timer_more_is){timer_more_is=true;timer_more=window.setInterval(minute_p,timeout);}});minute_more.bind('mouseout mouseup click',function(){timer_more_is=false;clearInterval(timer_more);});minute_less.mousedown(function(){minute_m();if(!timer_less_is){timer_less_is=true;timer_less=window.setInterval(minute_m,timeout);}});minute_less.bind('mouseout mouseup click',function(){timer_less_is=false;clearInterval(timer_less);});},initPhones:function(phone_field){var o='';phone_field.ForceNumericOnly();if(jQuery(this).val()=='0'){jQuery(this).val('7');phone_field.val('+'+jQuery(this).val());}
if(jQuery(this).val()!='0'&&phone_field.val()==''){phone_field.val('+'+jQuery(this).val());}
o=jQuery(this).val()!='0'?'+'+jQuery(this).val():o;var main_self=jQuery(this);jQuery(this).unbind("click");jQuery(this).click(function(){if(jQuery(this).val()!='0'){o="+"+jQuery(this).val();}
return false;})
jQuery(this).change(function(){self=jQuery(this);if(jQuery(this).val()!='0'){is_in=phone_field.val().indexOf(o);if(is_in!=-1){if(is_in!=0){phone_field.val('+'+self.val());}else{phone_field.val(phone_field.val().replace(o,'+'+self.val()));}}else{phone_field.val('+'+self.val()+phone_field.val());}}else{phone_field.val('');}
return false;});phone_field.bind("keypress click focus keyup keydown mousedown mouseup mousemove",function(){if(phone_field.val().indexOf(o)==-1&&main_self.val()!=0){phone_field.val('+'+main_self.val());}
if(phone_field.val().indexOf(o)!=0&&main_self.val()!=0){phone_field.val('+'+main_self.val());}});},initPhonesStyler:function(phone_field){var o='';phone_field.ForceNumericOnly();if(jQuery(this).val()=='0'){jQuery(this).val('7');phone_field.val('+'+jQuery(this).val());}
if(jQuery(this).val()!='0'&&phone_field.val()==''){phone_field.val('+'+jQuery(this).val());}
o=jQuery(this).val()!='0'?'+'+jQuery(this).val():o;var main_self=jQuery(this);jQuery('#phone_country_code-styler').live('click',function(){if(jQuery(this).parent().children('#phone_country_code').val()!='0'){o="+"+jQuery(this).parent().children('#phone_country_code').val();}
return false;});jQuery(this).change(function(){self=jQuery(this);if(jQuery(this).val()!='0'){is_in=phone_field.val().indexOf(o);if(is_in!=-1){if(is_in!=0){phone_field.val('+'+self.val());}else{phone_field.val(phone_field.val().replace(o,'+'+self.val()));}}else{phone_field.val('+'+self.val()+phone_field.val());}}else{phone_field.val('');}
return false;});phone_field.bind("keypress click focus keyup keydown mousedown mouseup mousemove",function(){if(phone_field.val().indexOf(o)==-1&&main_self.val()!=0){phone_field.val('+'+main_self.val());}
if(phone_field.val().indexOf(o)!=0&&main_self.val()!=0){phone_field.val('+'+main_self.val());}});},WithoutSpecChars:function(){return this.each(function(){jQuery(this).keypress(function(e){var key=e.charCode||0;return(key>=65&&key<=90||key>=97&&key<=122||key>=48&&key<=57||key=='0');});});},ForceNumericOnly:function(){return this.each(function(){jQuery(this).bind("cut copy paste",function(e){return false;});jQuery(this).keypress(function(e){var key=e.charCode||e.keyCode||0;return(key==8||key==46||key==9||key==27||key==0||(key>=48&&key<=57));});});},onShow:function(callback,unbind){return this.each(function(){var obj=this;var bindopt=(unbind==undefined)?true:unbind;if(jQuery.isFunction(callback)){if(jQuery(this).is(':hidden')){var checkVis=function(){if(jQuery(obj).is(':visible')){callback.call();if(bindopt){jQuery('body').unbind('click keyup keydown',checkVis);}}}
jQuery('body').bind('click keyup keydown',checkVis);}
else{callback.call();}}});},MoskowCorrect:function(r_date,r_hour,r_minute){var result_date='';var result_hour='';var result_minute='';jQuery("#c-hour-msk").jStepper({minValue:0,maxValue:23,minLength:2});jQuery("#hour-msk").jStepper({minValue:0,maxValue:23,minLength:2});jQuery("#minute-msk").jStepper({minValue:0,maxValue:59,minLength:2});jQuery("#c-minute-msk").jStepper({minValue:0,maxValue:59,minLength:2});var getTwoCharMinutes=function(minute){return minute<10?'0'+minute:minute;};jQuery("#c-minute-msk").timeMinuteSet(jQuery('#c-minute-plus'),jQuery('#c-minute-minus'));jQuery("#c-hour-msk").timeHourSet(jQuery('#c-hour-plus'),jQuery('#c-hour-minus'));jQuery("#minute-msk").timeMinuteSet(jQuery('#minute-plus'),jQuery('#minute-minus'));jQuery("#hour-msk").timeHourSet(jQuery('#hour-plus'),jQuery('#hour-minus'));window.onresize=function(){var left=(jQuery(window).width()-400)/2;jQuery('.overlayDialog').css('left',left);}
jQuery('#c-correction-ok-button').click(function(){if(!jQuery('#c-date-for-correct').val()||!jQuery('#c-hour-msk').val()||!jQuery('#c-minute-msk').val()){alert('Введите корректные данные!')}else{jQuery("#correction-table").hide();t_val=jQuery("#c-date-for-correct").val();jQuery("#user-time-date").html(t_val.substr(0,2)+' '+month[parseInt(t_val.substr(4,6),10)-1]+' '+t_val.substr(6,9)+' <span style="font-size:18px; margin-left:38px;">'+jQuery("#c-hour-msk").val()+':'+jQuery("#c-minute-msk").val()+'</span>');jQuery("#user-time-date").show();}});jQuery('#correct_time_link').click(function(){d=new Date()
jQuery("#c-date-for-correct").datepicker('setDate',(d));jQuery('#c-hour-msk').val(d.getHours());jQuery('#c-minute-msk').val(getTwoCharMinutes(d.getMinutes()));jQuery("#correction-table").show();jQuery("#user-time-date").hide();return false;});jQuery('#date-for-correct').datepicker(calendar_options);jQuery('#c-date-for-correct').datepicker(c_calendar_options);jQuery("#date-for-correct").datepicker('setDate',(new Date()));jQuery(this).click(function(){options={};options['width']=400;options['left']=0;options['style']=1;jQuery(".msk-correct-block").overlayDialog(options);d=new Date();var minute=0;jQuery("#user-time-date").html(d.getDate()+' '+month[d.getMonth()]+' '+d.getFullYear()+' <span style="font-size:18px; margin-left:38px;">'+d.getHours()+':'+getTwoCharMinutes(d.getMinutes())+'</span>');jQuery("#date-for-correct").val(jQuery("#date").val());jQuery("#hour-msk-for-correct").val(jQuery("#hour-msk").val());jQuery("#minute-msk-for-correct").val(jQuery("#minute-msk").val());$("html, body").animate({scrollTop:0},"slow");return false;});jQuery("#ok-msk-button").click(function(){d=new Date();current_time=d.getDate()+'.'+(parseInt(d.getMonth(),10)+1)+'.'+d.getFullYear()+'.'+d.getHours()+':'+d.getMinutes()
if(jQuery('#c-date-for-correct').val()&&jQuery('#c-hour-msk').val()&&jQuery('#c-minute-msk').val()){current_time=jQuery('#c-date-for-correct').val();current_time=current_time+' '+jQuery('#c-hour-msk').val()+':'+jQuery('#c-minute-msk').val();}
if(jQuery('#date-for-correct').val()&&jQuery('#hour-msk').val()&&jQuery('#minute-msk').val()){local_time=jQuery('#date-for-correct').val();local_time=local_time+' '+jQuery('#hour-msk').val()+':'+jQuery('#minute-msk').val();jQuery.post("/ajax/getmsktime/",{date:local_time,current:current_time,format:"d.m.Y H:i"},function(response){jQuery("#moskow-date-time").html(response.day+' '+month[parseInt(response.month,10)-1]+' '+response.year+'  <span style="font-size:30px; margin-left:40px">'+response.hour+':'+response.minute+'</span>');result_date=response.day+'.'+response.month+'.'+response.year;result_hour=response.hour;result_minute=response.minute;},"json");}else{alert('Укажите дату и время экзамена!');}});jQuery(".msk-confirm-button").click(function(){r_date.val(result_date);r_hour.val(result_hour);r_minute.val(result_minute);jQuery('.overlayDialog .closeh').trigger('click');});},QuickAjaxSubmitLandings:function(callback){jQuery(this).submit(function(){main_obj=jQuery(this);jQuery(".mess-error").hide();jQuery('.error').attr('class','inp_line');jQuery(".inp-error").removeClass("inp-error");PrShow(main_obj);jQuery('.save-is-ok').remove();jQuery(this).ajaxSubmit({dataType:"json",success:function(response){if(response.status=="OK"){PrHide(main_obj);}
if(response.status=="ERROR"&&response.error.class_name=="ExUploadResource"){jQuery('.file-error').show();PrHide(main_obj);}else{jQuery('.file-error').hide();}
if(response.status=="ERROR"&&response.error.class_name=="ExValidateFails"){PrHide(main_obj);jQuery(response.error.fields).showErrorsLanding({field_css:"inp-error"});}else if(response.status=="ERROR"&&response.error.class_name!="ExValidateFails"){PrHide(main_obj);jQuery("#"+response.error.class_name).show();}
callback(response);}});return false;});var PrHide=function(main_obj){jQuery('#'+main_obj.attr('id')+' input[type=submit]').show();jQuery('#preloader').remove();};var PrShow=function(main_obj){jQuery('#'+main_obj.attr('id')+' input[type=submit]').hide();jQuery('<div style="margin: 0 300px; width: 40px; height: 40px;" id="preloader"></div>').insertBefore(jQuery('#'+jQuery(this).attr('id')+' input[type=submit]'));};},QuickAjaxSubmit:function(callback){jQuery(this).submit(function(){var main_obj=jQuery(this);jQuery(".mess-error").hide();jQuery(".inp-error").removeClass("inp-error");jQuery('.save-is-ok').remove();if(typeof CKEDITOR!='undefined'&&CKEDITOR!=''){for(var p in CKEDITOR.instances){CKEDITOR.instances[p].updateElement();}}
jQuery(this).ajaxSubmit({dataType:"json",success:function(response){if(response.status=="OK"){}
console.log(response.status);if(response.status=="ERROR"&&response.error.class_name=="ExUploadResource"){jQuery('.file-error').show();}else{jQuery('.file-error').hide();}
if(response.status=="ERROR"&&response.error.class_name=="ExValidateFails"){jQuery(response.error.fields).showErrors({field_css:"inp-error"});}else if(response.status=="ERROR"&&response.error.class_name!="ExValidateFails"){jQuery("#"+response.error.class_name).show();}
callback(response);}});return false;});var PrHide=function(main_obj){jQuery('#'+main_obj.attr('id')+' input[type=submit]').show();jQuery('#preloader').remove();};var PrShow=function(main_obj){jQuery('#'+main_obj.attr('id')+' input[type=submit]').hide();jQuery('<div style="margin: 0 300px; width: 40px; height: 40px;" id="preloader"></div>').insertBefore(jQuery('#'+jQuery(this).attr('id')+' input[type=submit]'));};},showErrors:function(options){jQuery(this).each(function(i,item){jQuery(item.errors).each(function(i,error){jQuery("#"+item.field+this).show();});if(options&&options.field_css){jQuery("#"+item.field).addClass(options.field_css);}});},checkboxStyle:function(){var element=$(this).attr("href");$(element).hide();if($(element).is(":checked")){$(this).addClass("checked");}
$(this).click(function(){$(this).toggleClass("checked");$(element).attr("checked",$(this).hasClass("checked"));$(element).trigger("change");return false;});$(this).bind("check",function(){$(this).addClass("checked");$(element).attr("checked",true);$(element).trigger("change");});$(this).bind("uncheck",function(){$(this).removeClass("checked");$(element).attr("checked",false);$(element).trigger("change");});$(element).trigger("change");},personalManager:function(){$(this).change(function(){if([4,14,7,10,28,3,29,121].indexOf(parseInt($(this).val()))!=-1){$(".checkbox").show();return $("a[rel='checkbox']").trigger("check");}
$(".checkbox").hide();return $("a[rel='checkbox']").trigger("uncheck");});$(this).trigger("change");},preloader:function(){$('<p class="preload" style="float: right;"><img src="'+img_url+'transparent_preloader.gif" alt=""></p>').insertBefore($(this));$(this).hide();},showErrorsLanding:function(options){jQuery('.error').attr('class','inp_line');jQuery('.error_msg').hide();jQuery(this).each(function(i,item){jQuery(item.errors).each(function(i,error){jQuery("#"+item.field).parents('.inp_line').attr('class','inp_line error');jQuery("#"+item.field+error).show();});});},simpleValid:function(){$(this).each(function(i,item){$(item).removeClass('inp-error');if($(item).val().length==0){$(item).addClass('inp-error');$(item).parent().children('.mess-error').show();}});},initAuthorSlider:function(){var self=$(this);var visible_block='slider-photo-area';margin_l=(($('.slider-block').width()-70-$('.download').width()*$('.download').length)/2)>0?(($('.slider-block').width()-70-$('.download').width()*$('.download').length)/2):0;$('#top-block').css('margin-left',margin_l);$('.'+visible_block).show();$('.photos-slider-track').show();var offset=25;var block_width=$('.slider-photo-tbl').width()+$('.slider-photo-tbl').width()*0.01;var c=$('.photos-slider-track').width()>0?(block_width-$('.'+visible_block).width())/($('.photos-slider-track').width()):450;$('.slider-photo-tbl').css('margin-left','0px');$('.photos-slider-drag').css('left','0px')
$('.photos-slider-drag').draggable({axis:"x",containment:'parent',drag:function(event,ui){$('.slider-photo-tbl').css('margin-left',-($('.photos-slider-drag').position().left*c)+'px');}});if($('.'+visible_block).width()>=$('.slider-photo-tbl').width()){$('.photos-slider-track').hide();$('.photos-slider-drag').css('left','0px');}else{$('.photos-slider-track').show();}
$('.right').parent().css({'-moz-user-select':'-moz-none','-o-user-select':'none','-khtml-user-select':'none','-webkit-user-select':'none','user-select':'none'});$('.photos-slider-track').click(function(e){var offset_sys=$(this).offset();var pos=(e.pageX-offset_sys.left-$('.photos-slider-drag').width()/2)
if(pos<=0){pos=0;}
if(pos>$('.photos-slider-track').width()-$('.photos-slider-drag').width()){pos=$('.photos-slider-track').width()-($('.photos-slider-drag').width());}
$('.photos-slider-drag').css('left',pos);$('.slider-photo-tbl').css('margin-left',-($('.photos-slider-drag').position().left*c)+'px');});window.onresize=function(){c=(block_width-$('.'+visible_block).width())/($('.photos-slider-track').width());$('.photos-slider-drag').draggable({axis:"x",containment:'parent',drag:function(event,ui){$('.slider-photo-tbl').css('margin-left',-($('.photos-slider-drag').position().left*c)+'px');}});dragControl();margin_l=(($('.slider-block').width()-70-$('.download').width()*$('.download').length)/2)>0?(($('.slider-block').width()-70-$('.download').width()*$('.download').length)/2):0;$('#top-block').css('margin-left',margin_l);};var dragControl=function(){$('.slider-photo-tbl').initAuthorSlider();if($('.'+visible_block).width()>=$('.slider-photo-tbl').width()){$('.photos-slider-track').hide();$('.photos-slider-drag').hide();}else{$('.photos-slider-drag').css('left','0px');$('.slider-photo-tbl').css('margin-left','0px');$('.photos-slider-track').show();$('.photos-slider-drag').show();}};},initCustomerSlider:function(){var self=$(this);var visible_block='visible_block';$('#preloader_line_cust').remove();$('#'+visible_block).show();$('.photos-slider-track').show();var e_visible=6
var offset=23;var block_width=(self.children('.download').width()+offset)*self.children('.download').length;$('#file-block').width(block_width);width=360;var parent_block_width=$(this).parent().parent('td').width();if($('#visible_block').length==0){self.parent().html('<div id="'+visible_block+'" '+'style="width:'+width+'px; overflow: hidden; max-height: 105px">'+self.parent().html()+'</div>');}
$('#file_container').width(width);if($('.photos-slider-track').length==0){$('#'+visible_block).append('<div class="photos-slider-track" style="margin-top: 8px; width:'+width+' ">'+'<i class="photos-slider-drag" style="left: 0px; "></i>'+'</div>'+'</div>');}
$('#file-block').width(block_width);var c=$('.photos-slider-track').width()>0?(block_width-$('#'+visible_block).width())/($('.photos-slider-track').width()):450;$('#file-block').css('margin-left','0px');$('.photos-slider-drag').css('left','0px')
$('.photos-slider-drag').draggable({axis:"x",containment:'parent',drag:function(event,ui){$('#file-block').css('margin-left',-($('.photos-slider-drag').position().left*c)+'px');}});if($('#'+visible_block).width()>=$('#file-block').width()){$('.photos-slider-track').hide();$('.photos-slider-drag').css('left','0px');}else{$('.photos-slider-track').show();}
$('.right').parent().css({'-moz-user-select':'-moz-none','-o-user-select':'none','-khtml-user-select':'none','-webkit-user-select':'none','user-select':'none'});$('.photos-slider-track').click(function(e){var offset=$(this).offset();var pos=(e.pageX-offset.left-$('.photos-slider-drag').width()/2)
if(pos<=0){pos=0;}
if(pos>$('.photos-slider-track').width()-$('.photos-slider-drag').width()){pos=$('.photos-slider-track').width()-($('.photos-slider-drag').width());}
$('.photos-slider-drag').css('left',pos);$('#file-block').css('margin-left',-($('.photos-slider-drag').position().left*c)+'px');});window.onresize=function(){c=(block_width-$('#'+visible_block).width())/($('.photos-slider-track').width());$('.photos-slider-drag').draggable({axis:"x",containment:'parent',drag:function(event,ui){$('#file-block').css('margin-left',-($('.photos-slider-drag').position().left*c)+'px');}});dragControl();};var dragControl=function(){if($('#'+visible_block).width()>=$('#file-block').width()){$('.photos-slider-track').hide();$('.photos-slider-drag').css('left','0px');}else{$('.photos-slider-track').show();}};},PreloadCustomerSlider:function(){var self=$(this);$('#preloader_line_cust').remove();$(this).parent().hide();$('<div style="height: 40px;" id="preloader_line_cust"></div>').insertAfter(self.parent());}});function AdminAlert(html,options){options=options||0;var width=typeof options['width']!='undefined'?options['width']:200;var width_variant=typeof options['width_variant']!='undefined'?options['width_variant']:'px';var left_variant=typeof options['left_variant']!='undefined'?options['left_variant']:'px';var style=typeof options['style']!='undefined'?options['style']:1;var def_style=typeof options['def_style']!='undefined'?options['def_style']:0;var confirm=typeof options['confirm']!='undefined'?options['confirm']:0;var reload=typeof options['reload']!='undefined'?options['reload']:0;if(width_variant=='%'){left=(100-width)/2;}
if(def_style){html='<p style="margin-bottom: 10px; margin-top:20px; text-align: center; font-size: 18px; ">'+html+'</p>'}
var left=($("html").width()-width)/2;if(confirm){switch(style){case 1:$("body").append('<div id="facebox_closer"><div id="facebox_overlay" class="facebox_hide facebox_overlayBG" style="display: block; opacity: 0.5;"></div></div>');$("body").append('<div style="position: fixed; z-index: 99; background: white; border: solid 1px gray;  top: '+top+'px; left: '+left+left_variant+'; width:'+width+width_variant+';" class="pops2 wpop2 overlayDialog"><em class="closeh" style="margin:10px;"></em><div id="dialogContent" class="popc"><div id="alert_block" style="margin: 20px 20px 0px; word-wrap: break-word;"></div><p"><button style="margin: 0pt auto 10px; margin-left: 18%;"    class="button button-ok-default">Подтвердить</button>&#160;<button  class="button button-cancel-default">Отмена</button><p></p></p"></div><div class="msk-orange-line"></div></div>');break;default:$("body").append('<div id="facebox_closer"><div id="facebox_overlay" class="facebox_hide facebox_overlayBG" style="display: block; opacity: 0.5;"></div></div>');$("body").append('<div style="position: fixed; z-index: 99; background: white; top: '+top+'px;  left: '+left+left_variant+'; width:'+width+width_variant+';" class="pops2 wpop2 overlayDialog"><div class="ptop4"><i class="c"><i></i></i><i class="l"></i><i class="r"></i></div><div class="pmidd"><em class="closeh"></em><div id="dialogContent" class="popc"><div id="alert_block" style="margin: 20px 20px 0px; word-wrap: break-word;"></div></div><i class="ml"></i><i class="mr"></i></div><div class="pbott"><i class="c"><i></i></i><i class="l"></i><i class="r"></i></div></div>');}}else{switch(style){case 1:$("body").append('<div id="facebox_closer"><div id="facebox_overlay" class="facebox_hide facebox_overlayBG" style="display: block; opacity: 0.5;"></div></div>>');$("body").append('<div style="position: fixed; z-index: 99; background: white; border: solid 1px gray;  top: '+top+'px; left: '+left+left_variant+'; width:'+width+width_variant+';" class="pops2 wpop2 overlayDialog"><em class="closeh" style="margin:10px;"></em><div id="dialogContent" class="popc"><div id="alert_block" style="margin: 20px 20px 0px; word-wrap: break-word;"></div><p"><button style="margin: 0pt auto 10px; margin-left: 40%;"    class="button button-close-default">Ok</button><p></p></p"></div><div class="msk-orange-line"></div></div>');break;default:$("body").append('<div id="facebox_closer"><div id="facebox_overlay" class="facebox_hide facebox_overlayBG" style="display: block; opacity: 0.5;"></div></div>');$("body").append('<div style="position: fixed; z-index: 99; background: white; top: '+top+'px;  left: '+left+left_variant+'; width:'+width+width_variant+';" class="pops2 wpop2 overlayDialog"><div class="ptop4"><i class="c"><i></i></i><i class="l"></i><i class="r"></i></div><div class="pmidd"><em class="closeh"></em><div id="dialogContent" class="popc"><div id="alert_block" style="margin: 20px 20px 0px; word-wrap: break-word;"></div></div><i class="ml"></i><i class="mr"></i></div><div class="pbott"><i class="c"><i></i></i><i class="l"></i><i class="r"></i></div></div>');}}
var self=this;$(this).bind("close.dialog",function(){$(".facebox_overlayBG").remove();$(".overlayDialog").remove();return false;});$(".closeh, .facebox_overlayBG, .button-close-default").click(function(){if(reload){location.reload();}
$(self).trigger('close.dialog');return false;});$("#alert_block").append(html);var top=((parseInt(document.body.clientHeight,10)-parseInt($('.overlayDialog').height(),10))/2)-50;$('.overlayDialog').css('top',top);$(this).show();return false;}
function alertN(html,options){options=options||0;var width=typeof options['width']!='undefined'?options['width']:200;var width_variant=typeof options['width_variant']!='undefined'?options['width_variant']:'px';var left_variant=typeof options['left_variant']!='undefined'?options['left_variant']:'px';var style=typeof options['style']!='undefined'?options['style']:1;var def_style=typeof options['def_style']!='undefined'?options['def_style']:0;var reload=typeof options['reload']!='undefined'?options['reload']:0;var max_height=typeof options['max_height']!='undefined'?options['max_height']:0;var text_align=typeof options['text_align']!='undefined'?options['text_align']:0;if(width_variant=='%'){left=(100-width)/2;}
if(def_style){if(max_height){html='<p style="margin-bottom: 10px; overflow-y: auto; max-height: '+max_height+'px;  margin-top:20px; text-align: center; font-size: 18px;">'+html+'</p>'}else{html='<p style="margin-bottom: 10px; margin-top:20px; text-align: center; font-size: 18px;">'+html+'</p>'}}
var left=($("html").width()-width)/2;switch(style){case 1:$("body").append('<div class="overlay" style="display:block"></div>');$("body").append('<div style="position: fixed; border: solid 1px gray;  top: '+top+'px; left: '+left+left_variant+'; width:'+width+width_variant+';" class="pops2 wpop2 overlayDialog"><em class="closeh" style="margin:10px;"></em><div id="dialogContent" class="popc"><div id="alert_block" style="margin: 20px 20px 0px; word-wrap: break-word;"></div><p"><button style="margin: 0pt auto 10px; text-align: center;" class="button-close-default ok-msk-button">Ok</button><p></p></p"></div></div>');break;default:$("body").append('<div class="overlay" style="display:block"></div>');$("body").append('<div style="position: fixed; top: '+top+'px;  left: '+left+left_variant+'; width:'+width+width_variant+';" class="pops2 wpop2 overlayDialog"><div class="ptop4"><i class="c"><i></i></i><i class="l"></i><i class="r"></i></div><div class="pmidd"><em class="closeh"></em><div id="dialogContent" class="popc"><div id="alert_block" style="margin: 20px 20px 0px; word-wrap: break-word;"></div></div><i class="ml"></i><i class="mr"></i></div><div class="pbott"><i class="c"><i></i></i><i class="l"></i><i class="r"></i></div></div>');}
var self=this;$(this).bind("close.dialog",function(){$(".overlay").remove();$(".overlayDialog").remove();return false;});$(".closeh, .overlay, .button-close-default").click(function(){if(reload){location.reload();}
$(self).trigger('close.dialog');return false;});$("#alert_block").append(html);var top=((parseInt($("html").height(),10)-parseInt($('.overlayDialog').height(),10))/2)-50;$('.overlayDialog').css('top',top);if(text_align){$('#alert_block p').css('text-align',text_align);}
$(this).show();return false;};function declOfNum(number,titles){cases=[2,0,1,1,1,2];return titles[(number%100>4&&number%100<20)?2:cases[(number%10<5)?number%10:5]];};function AdminAlertN(html,options){options=options||0;var width=typeof options['width']!='undefined'?options['width']:200;var width_variant=typeof options['width_variant']!='undefined'?options['width_variant']:'px';var left_variant=typeof options['left_variant']!='undefined'?options['left_variant']:'px';var style=typeof options['style']!='undefined'?options['style']:1;var def_style=typeof options['def_style']!='undefined'?options['def_style']:0;if(width_variant=='%'){left=(100-width)/2;}
if(def_style){html='<p style="margin-bottom: 10px; margin-top:20px; text-align: center; font-size: 18px;">'+html+'</p>'}
var left=($("html").width()-width)/2;switch(style){case 1:$("body").append('<div id="facebox_overlay" class="facebox_hide facebox_overlayBG" style="display: block; opacity: 0.5;"></div>');$("body").append('<div style="z-index:99;background-color:#F5F8FA; position: fixed; border-radius: 5px; border: solid 1px gray;  top: '+top+'px; left: '+left+left_variant+'; width:'+width+width_variant+';" class="pops2 wpop2 overlayDialog"><em class="closeh" style="margin:10px;"></em><div id="dialogContent" class="popc"><div id="alert_block" style="margin: 20px 20px 0px; word-wrap: break-word;"></div></p></p"></div><div class="msk-orange-line"></div></div>');break;default:$("body").append('<div id="facebox_overlay" class="facebox_hide facebox_overlayBG" style="display: block; opacity: 0.5;"></div>');$("body").append('<div style="z-index:99;background-color:#F5F8FA; position: fixed; border-radius: 5px; top: '+top+'px;  left: '+left+left_variant+'; width:'+width+width_variant+';" class="pops2 wpop2 overlayDialog"><div class="ptop4"><i class="c"><i></i></i><i class="l"></i><i class="r"></i></div><div class="pmidd"><em class="closeh"></em><div id="dialogContent" class="popc"><div id="alert_block" style="margin: 20px 20px 0px; word-wrap: break-word;"></div></div><i class="ml"></i><i class="mr"></i></div><div class="pbott"><i class="c"><i></i></i><i class="l"></i><i class="r"></i></div></div>');}
var self=this;$(this).bind("close.dialog",function(){$(".facebox_overlayBG").remove();$(".overlayDialog").remove();return false;});$(".closeh, .facebox_overlayBG").click(function(){$(self).trigger('close.dialog');return false;});$("#alert_block p .button-cancel-default-admin").live('click',function(){$(self).trigger('close.dialog');return false;});$("#alert_block").append(html);var top=((parseInt(document.body.clientHeight,10)-parseInt($('.overlayDialog').height(),10))/2)-50;$('.overlayDialog').css('top',top);$(this).show();return false;};function scrollToElement(element){$('html,body').scrollTop(element.offset().top-100);return false;};function focus_element(element){if(typeof element.val()!='undefined'&&typeof element.val()!=''){scrollToElement(element);element.focus();val=element.val();if(element.val()!=''){element.val("").val(val);}}};function scrollToElementAccurate(element,correct){correct=correct||0;$('html,body').scrollTop(element.offset().top+(correct));return false;};$(document).ready(function(){if($.browser.msie&&$.browser.version<=10){$.fn.extend({val:function(val){if(val==undefined){if($(this).attr("placeholder")&&$(this).attr("placeholder")==$(this).attr("value")){$(this).val("");}
if(this.length){var elem=this[0];if(jQuery.nodeName(elem,"select")){var index=elem.selectedIndex,a=[],options=elem.options,one=elem.type=="select-one";if(index<0)
return null;for(var i=one?index:0,max=one?index+1:options.length;i<max;i++){var option=options[i];if(option.selected){var val=jQuery.browser.msie&&!option.attributes["value"].specified?option.text:option.value;if(one)
return val;a.push(val);}}
return a;}else
return this[0].value.replace(/\r/g,"");}}else
return this.each(function(){if(val.constructor==Array&&/radio|checkbox/.test(this.type))
this.checked=(jQuery.inArray(this.value,val)>=0||jQuery.inArray(this.name,val)>=0);else if(jQuery.nodeName(this,"select")){var tmp=val.constructor==Array?val:[val];jQuery("option",this).each(function(){this.selected=(jQuery.inArray(this.value,tmp)>=0||jQuery.inArray(this.text,tmp)>=0);});if(!tmp.length)
this.selectedIndex=-1;}else
this.value=val;});}})
if($.browser.msie){$("form").find("input[type='text']").each(function(){var tp=$(this).attr("placeholder");$(this).attr('value',tp).css('color','#818586');}).focusin(function(){var val=$(this).attr('placeholder');if($(this).val()==val){$(this).attr('value','').css('color','#303030');}}).focusout(function(){var val=$(this).attr('placeholder');if($(this).val()==""){$(this).attr('value',val).css('color','#818586');}});$("form").find("input[type='password']").each(function(i,item){if(!$(this).attr("placeholder")){return false;}
var id="iePlaceholder"+$(this).attr("name")+'_'+Math.floor(Math.random()*(1000-1)+1);$(this).hide();$(this).after('<input id="'+id+'" type="text" style="color:#818586"  value="'+$(this).attr("placeholder")+'" />');var self=this;$("#"+id).focus(function(){$("#"+id).hide();$(self).show();$(self).focus();$(self).focus();});$(this).focusout(function(){if($(this).val().length==0){$(this).hide();$("#"+id).show();}});});$("form").submit(function(){$(this).find("input[type='text']").each(function(){var val=$(this).attr('placeholder');if($(this).val()==val){$(this).attr('value','');}})});}}
$(".whatis30").mouseover(function(){var html='<div id="whatisTip" style="box-shadow:0 0 7px #666;font-size:12px;width:250px;display:none;padding:15px;border:#666 1px solid;background-color: #fff;z-index:9999;position:absolute">'+$(this).attr("rel")+'</div>';$(document.body).append(html);$("#whatisTip").css({top:$(this).offset().top+30,left:$(this).offset().left+5});$("#whatisTip").show("slow");return false;}).mouseout(function(){if($("#whatisTip").length==0){return false;}
$('#whatisTip').hide('slow',function(){$(this).remove();});}).click(function(){return false;});});